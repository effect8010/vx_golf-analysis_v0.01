"use strict";(self.webpackChunkgolf_simulator_analysis_client=self.webpackChunkgolf_simulator_analysis_client||[]).push([[393],{30694:(t,e,n)=>{n.d(e,{hj:()=>l,kW:()=>c,oo:()=>d,z8:()=>o});var s=n(29246),a=n(45835);const r="/api/stats",i={data:{},timestamp:{},cacheDuration:3e5,set(t,e){this.data[t]=e,this.timestamp[t]=Date.now();try{localStorage.setItem(`stats_cache_${t}`,JSON.stringify(e)),localStorage.setItem(`stats_cache_${t}_timestamp`,Date.now().toString())}catch(n){console.warn("\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0 \uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328:",n)}return e},get(t){const e=Date.now(),n=this.timestamp[t]||0;if(this.data[t]&&e-n<this.cacheDuration)return console.log(`[\uce90\uc2dc \ud788\ud2b8] ${t}`),this.data[t];try{const n=localStorage.getItem(`stats_cache_${t}`),s=localStorage.getItem(`stats_cache_${t}_timestamp`);if(n&&s&&e-parseInt(s)<this.cacheDuration){const e=JSON.parse(n);return this.data[t]=e,this.timestamp[t]=parseInt(s),console.log(`[\uc2a4\ud1a0\ub9ac\uc9c0 \uce90\uc2dc \ud788\ud2b8] ${t}`),e}}catch(s){console.warn("\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0\uc11c \uce90\uc2dc \uc77d\uae30 \uc2e4\ud328:",s)}return null},invalidate(t){const e=new RegExp(t);Object.keys(this.data).forEach((t=>{e.test(t)&&(delete this.data[t],delete this.timestamp[t])}));try{for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n.startsWith("stats_cache_")&&e.test(n)&&(localStorage.removeItem(n),localStorage.removeItem(`${n}_timestamp`))}}catch(n){console.warn("\ub85c\uceec \uc2a4\ud1a0\ub9ac\uc9c0\uc5d0\uc11c \uce90\uc2dc \uc0ad\uc81c \uc2e4\ud328:",n)}}},l=async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const n=`user_stats_${t||"me"}`;if(!e){const t=i.get(n);if(t)return t}const l=t?`${r}/users/${t}`:`${r}/users/me`,o=await s.A.get(l,{headers:(0,a.eT)()});return i.set(n,o.data)}catch(l){var n;throw(null===(n=l.response)||void 0===n?void 0:n.data)||l}},o=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const l=`user_club_stats_${t||"me"}_${e||"all"}`;if(!n){const t=i.get(l);if(t)return t}let o=t?`${r}/users/${t}/clubs`:`${r}/users/me/clubs`;e&&(o+=`/${e}`);const c=await s.A.get(o,{headers:(0,a.eT)()});return i.set(l,c.data)}catch(o){var l;throw(null===(l=o.response)||void 0===l?void 0:l.data)||o}},c=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{const o=`user_trend_stats_${t||"me"}_${e}_${n}`;if(!l){const t=i.get(o);if(t)return t}const c=t?`${r}/users/${t}/trends/${e}/${n}`:`${r}/users/me/trends/${e}/${n}`,d=await s.A.get(c,{headers:(0,a.eT)()});return i.set(o,d.data)}catch(c){var o;throw(null===(o=c.response)||void 0===o?void 0:o.data)||c}},d=async t=>{const e=t?`/api/users/${t}/partner-stats`:"/api/users/me/partner-stats";return(await s.A.get(e)).data.data}},80535:(t,e,n)=>{n.d(e,{P_:()=>o,xu:()=>l});var s=n(29246),a=n(45835);const r="/api/rounds",i={data:{},timestamp:{},cacheDuration:3e5,set(t,e){return this.data[t]=e,this.timestamp[t]=Date.now(),e},get(t){const e=Date.now(),n=this.timestamp[t]||0;return this.data[t]&&e-n<this.cacheDuration?(console.log(`[\uce90\uc2dc \ud788\ud2b8] ${t}`),this.data[t]):null},invalidate(t){const e=new RegExp(t);Object.keys(this.data).forEach((t=>{e.test(t)&&(delete this.data[t],delete this.timestamp[t])}))}},l=async function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const n=`round_${t}`;if(!e){const t=i.get(n);if(t)return t}const l=await s.A.get(`${r}/${t}`,{headers:(0,a.eT)()});return i.set(n,l.data)}catch(l){var n;throw(null===(n=l.response)||void 0===n?void 0:n.data)||l}},o=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const n=`round_history_${t}`;if(!e){const t=i.get(n);if(t)return t}const l=await s.A.get(`${r}/history?limit=${t}`,{headers:(0,a.eT)()});return i.set(n,l.data)}catch(l){var n;throw(null===(n=l.response)||void 0===n?void 0:n.data)||l}}},83393:(t,e,n)=>{n.r(e),n.d(e,{default:()=>C});var s=n(9950),a=n(28429),r=n(16491),i=n(82053),l=n(41413),o=n(66699),c=n(60899),d=n(18216),h=n(2235),x=n(1320),u=n(15769),g=n(69780),m=n(9213),j=n(21671),p=n(34075),A=n(46639),y=n(90158),v=n(76299),f=n(97714),b=n(53256),$=n(47520),w=n(40379),_=n(35298),S=n(66187),I=n(30694),k=n(80535),R=n(44414);_.t1.register(_.PP,_.kc,_.FN,_.No,_.E8,_.hE,_.m_,_.s$);const C=()=>{const t=(0,a.Zp)(),[e,n]=(0,s.useState)(!0),[_,C]=(0,s.useState)(null),[D,W]=(0,s.useState)([]),[P,E]=(0,s.useState)("5"),[H,M]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{n(!0);const t=await(0,I.hj)();C(t.data);const e=await(0,k.P_)(10);W(e.data||[])}catch(t){console.error("\ud1b5\uacc4 \ub370\uc774\ud130 \ub85c\ub529 \uc5d0\ub7ec:",t),M("\ud1b5\uacc4 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{n(!1)}})()}),[]),(0,s.useEffect)((()=>{if(!D||0===D.length){const t=Array.from({length:10},((t,e)=>({id:e+1,date:new Date(Date.now()-7*e*24*60*60*1e3).toISOString().split("T")[0],courseName:"\ud14c\uc2a4\ud2b8 \ucf54\uc2a4 "+(e%3+1),score:Math.floor(15*Math.random()+75),par:72,fairwayHitRate:Math.floor(30*Math.random()+50),greenHitRate:Math.floor(30*Math.random()+40),puttsPerRound:(.5*Math.random()+1.5).toFixed(1)})));W(t)}}),[D]);const N=t=>{let{value:e,up:n=!1}=t;return(0,R.jsxs)(r.A,{display:"flex",alignItems:"center",mt:1,color:n?"success.main":"error.main",children:[n?(0,R.jsx)(v.A,{fontSize:"small",sx:{mr:.5}}):(0,R.jsx)(f.A,{fontSize:"small",sx:{mr:.5}}),(0,R.jsx)(i.A,{variant:"body2",children:e})]})},O=t=>{let{current:e,target:n,label:s,icon:a}=t;return(0,R.jsxs)(r.A,{sx:{mb:2,p:1},children:[(0,R.jsxs)(r.A,{display:"flex",alignItems:"center",mb:1,children:[(0,R.jsx)(l.A,{sx:{mr:2,bgcolor:"primary.main"},children:a}),(0,R.jsxs)(r.A,{children:[(0,R.jsx)(i.A,{variant:"subtitle1",children:s}),(0,R.jsxs)(i.A,{variant:"body2",color:"textSecondary",children:["\ud604\uc7ac: ",e," / \ubaa9\ud45c: ",n]})]})]}),(0,R.jsx)(o.A,{variant:"determinate",value:e/n*100,sx:{height:8,borderRadius:5}})]})};if(e)return(0,R.jsx)(r.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,R.jsx)(A.A,{})});if(H)return(0,R.jsx)(r.A,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",children:(0,R.jsx)(i.A,{color:"error",children:H})});const T=(null===_||void 0===_?void 0:_.avgScore)||85.3,z=(null===_||void 0===_?void 0:_.fairwayHitRate)||64.2,B=(null===_||void 0===_?void 0:_.greenHitRate)||52.8,F=(null===_||void 0===_?void 0:_.puttsPerRound)||1.8;return(0,R.jsxs)(r.A,{children:[(0,R.jsxs)(r.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,R.jsx)(i.A,{variant:"h4",fontWeight:"bold",children:"\uace8\ud504 \ubd84\uc11d \ub300\uc2dc\ubcf4\ub4dc"}),(0,R.jsxs)(r.A,{display:"flex",alignItems:"center",children:[(0,R.jsx)(l.A,{sx:{bgcolor:"primary.main",mr:1},children:"K"}),(0,R.jsxs)(r.A,{children:[(0,R.jsx)(i.A,{variant:"body1",fontWeight:"bold",children:"\uae38\uace8\ud504"}),(0,R.jsxs)(i.A,{variant:"body2",color:"textSecondary",children:["\ud578\ub514\ucea1: ",(null===_||void 0===_?void 0:_.handicapIndex)||12.5]})]})]})]}),(0,R.jsxs)(c.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,R.jsx)(c.Ay,{item:!0,xs:6,md:3,children:(0,R.jsxs)(h.A,{elevation:3,sx:{p:2,borderRadius:2},children:[(0,R.jsx)(i.A,{variant:"body1",color:"textSecondary",children:"\ud3c9\uade0 \uc2a4\ucf54\uc5b4"}),(0,R.jsx)(i.A,{variant:"h3",fontWeight:"bold",children:T}),(0,R.jsx)(N,{value:"2.1\uc9c0\ub09c \ub2ec \ub300\ube44",up:!1})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:6,md:3,children:(0,R.jsxs)(h.A,{elevation:3,sx:{p:2,borderRadius:2},children:[(0,R.jsx)(i.A,{variant:"body1",color:"textSecondary",children:"\ud398\uc5b4\uc6e8\uc774 \uc548\ucc29\ub960"}),(0,R.jsxs)(i.A,{variant:"h3",fontWeight:"bold",children:[z,"%"]}),(0,R.jsx)(N,{value:"3.5%\uc9c0\ub09c \ub2ec \ub300\ube44",up:!0})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:6,md:3,children:(0,R.jsxs)(h.A,{elevation:3,sx:{p:2,borderRadius:2},children:[(0,R.jsx)(i.A,{variant:"body1",color:"textSecondary",children:"\uadf8\ub9b0 \uc801\uc911\ub960"}),(0,R.jsxs)(i.A,{variant:"h3",fontWeight:"bold",children:[B,"%"]}),(0,R.jsx)(N,{value:"1.2%\uc9c0\ub09c \ub2ec \ub300\ube44",up:!0})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:6,md:3,children:(0,R.jsxs)(h.A,{elevation:3,sx:{p:2,borderRadius:2},children:[(0,R.jsx)(i.A,{variant:"body1",color:"textSecondary",children:"\ud3c9\uade0 \ud37c\ud305"}),(0,R.jsx)(i.A,{variant:"h3",fontWeight:"bold",children:F}),(0,R.jsx)(N,{value:"0.2\uc9c0\ub09c \ub2ec \ub300\ube44",up:!1})]})})]}),(0,R.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,R.jsx)(c.Ay,{item:!0,xs:12,md:8,children:(0,R.jsxs)(h.A,{elevation:3,sx:{p:3,borderRadius:2,height:"100%"},children:[(0,R.jsx)(i.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"\ucd5c\uadfc \ub77c\uc6b4\ub4dc \uc2a4\ucf54\uc5b4"}),(0,R.jsxs)(y.A,{size:"small",sx:{mb:2},children:[(0,R.jsx)(d.A,{variant:"5"===P?"contained":"outlined",onClick:()=>E("5"),children:"5 \ub77c\uc6b4\ub4dc"}),(0,R.jsx)(d.A,{variant:"10"===P?"contained":"outlined",onClick:()=>E("10"),children:"10 \ub77c\uc6b4\ub4dc"}),(0,R.jsx)(d.A,{variant:"all"===P?"contained":"outlined",onClick:()=>E("all"),children:"\uc804\uccb4"})]}),(0,R.jsx)(r.A,{height:250,children:D.length?(0,R.jsx)(S.yP,{data:(()=>{const t=[...(()=>{if(!D||0===D.length)return[];const t="all"===P?D.length:Math.min(parseInt(P),D.length);return D.slice(0,t)})()].sort(((t,e)=>new Date(t.date)-new Date(e.date)));return{labels:t.map((t=>t.date)),datasets:[{type:"line",label:"\uc2a4\ucf54\uc5b4",data:t.map((t=>t.score)),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",yAxisID:"y"},{type:"bar",label:"\ud30c \ub300\ube44",data:t.map((t=>t.score-t.par)),backgroundColor:t.map((t=>t.score<t.par?"rgba(75, 192, 192, 0.7)":t.score===t.par?"rgba(255, 205, 86, 0.7)":"rgba(255, 99, 132, 0.7)")),yAxisID:"y1"}]}})(),options:{responsive:!0,interaction:{mode:"index",intersect:!1},stacked:!1,plugins:{title:{display:!0,text:"\ucd5c\uadfc \ub77c\uc6b4\ub4dc \uc131\uc801"},tooltip:{callbacks:{label:function(t){const e=t.dataset.label||"",n=t.raw;if(1===t.datasetIndex){return`${e}: ${n<0?"":"+"}${n}`}return`${e}: ${n}`}}}},scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"\ucd1d \uc2a4\ucf54\uc5b4"},reverse:!0,min:65,max:100},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"\ud30c \ub300\ube44"},grid:{drawOnChartArea:!1}}}}}):(0,R.jsx)(r.A,{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",children:(0,R.jsx)(i.A,{color:"textSecondary",children:"\uc544\uc9c1 \ub77c\uc6b4\ub4dc \uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})})})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(h.A,{elevation:3,sx:{p:3,borderRadius:2,height:"100%"},children:[(0,R.jsx)(i.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"\ubaa9\ud45c \ud604\ud669"}),(0,R.jsx)(O,{current:(null===_||void 0===_?void 0:_.handicapIndex)||12.5,target:10,label:"\ud578\ub514\ucea1 10 \ub2ec\uc131",icon:"H"}),(0,R.jsx)(O,{current:T,target:80,label:"\ud3c9\uade0 \uc2a4\ucf54\uc5b4 80 \ub2ec\uc131",icon:"S"}),(0,R.jsx)(O,{current:B,target:60,label:"\uadf8\ub9b0 \uc801\uc911\ub960 60% \ub2ec\uc131",icon:"G"})]})})]}),(0,R.jsxs)(c.Ay,{container:!0,spacing:2,mt:3,children:[(0,R.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(d.A,{variant:"contained",fullWidth:!0,startIcon:(0,R.jsx)(b.A,{}),sx:{height:"100%",py:2},onClick:()=>t("/rounds/new"),children:"\ub77c\uc6b4\ub4dc \uae30\ub85d\ud558\uae30"})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(d.A,{variant:"contained",color:"secondary",fullWidth:!0,startIcon:(0,R.jsx)($.A,{}),sx:{height:"100%",py:2},onClick:()=>t("/stats/clubs"),children:"\ud074\ub7fd\ubcc4 \ubd84\uc11d"})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(d.A,{variant:"contained",color:"success",fullWidth:!0,startIcon:(0,R.jsx)(w.A,{}),sx:{height:"100%",py:2},children:"\ubaa9\ud45c \uc124\uc815\ud558\uae30"})})]}),(0,R.jsxs)(h.A,{elevation:3,sx:{p:3,mt:4,borderRadius:2},children:[(0,R.jsx)(i.A,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"\ucd5c\uadfc \ub77c\uc6b4\ub4dc \uae30\ub85d"}),0===D.length?(0,R.jsx)(i.A,{variant:"body1",align:"center",p:3,color:"text.secondary",children:"\uc544\uc9c1 \ub4f1\ub85d\ub41c \ub77c\uc6b4\ub4dc \uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,R.jsx)(x.A,{children:(0,R.jsxs)(u.A,{children:[(0,R.jsx)(g.A,{children:(0,R.jsxs)(m.A,{sx:{bgcolor:"primary.light"},children:[(0,R.jsx)(j.A,{children:"\ub0a0\uc9dc"}),(0,R.jsx)(j.A,{children:"\ucf54\uc2a4"}),(0,R.jsx)(j.A,{align:"center",children:"\ucd1d\uc810"}),(0,R.jsx)(j.A,{align:"center",children:"\ud30c \ub300\ube44"}),(0,R.jsx)(j.A,{align:"center",children:"\ud398\uc5b4\uc6e8\uc774 \uc548\ucc29\ub960"}),(0,R.jsx)(j.A,{align:"center",children:"\ud3c9\uade0 \ud37c\ud305"}),(0,R.jsx)(j.A,{align:"center",children:"\uc0c1\uc138\ubcf4\uae30"})]})}),(0,R.jsx)(p.A,{children:D.map((e=>{const n=e.score-e.par;return(0,R.jsxs)(m.A,{hover:!0,sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"}},onClick:()=>t(`/stats/rounds/${e.id}`),children:[(0,R.jsx)(j.A,{children:e.date}),(0,R.jsx)(j.A,{children:e.courseName}),(0,R.jsx)(j.A,{align:"center",children:e.score}),(0,R.jsx)(j.A,{align:"center",sx:{color:n>0?"primary.main":n<0?"error.main":"text.primary",fontWeight:"bold"},children:n>0?`+${n}`:n}),(0,R.jsxs)(j.A,{align:"center",children:[e.fairwayHitRate,"%"]}),(0,R.jsx)(j.A,{align:"center",children:e.puttsPerRound}),(0,R.jsx)(j.A,{align:"center",children:(0,R.jsx)(d.A,{variant:"outlined",size:"small",onClick:n=>{n.stopPropagation(),t(`/stats/rounds/${e.id}`)},children:"\uc0c1\uc138\ubcf4\uae30"})})]},e.id)}))})]})})]})]})}}}]);